<!DOCTYPE html>
<html lang="es">

<head>
    <title>La casa de los libros</title>

    <!-- Metadatos -->
    <meta charset="UTF-8">
    <meta name="theme-color" content="#5b1a35" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="application-name" content="La casa de los libros" />

    <!-- Autores -->
    <meta name="author" content="Deanna Gina, Maidana Franco, Ruedas Lara, Programación Web 1 - UNLaM">

    <!-- Descripción y palabras clave -->
    <meta name="description"
        content="Sumérgete en un mundo de historias fascinantes. Encuentra en nuestro catálogo una selección única de libros. ¡Explora y nutre tu imaginación!">
    <meta name="keywords"
        content="libros, lectura, arte, ciencia, ficción, terror, derecho, deportes, divulgación científica, diseño, recreación, fantasía, unlam, UNLaM, Universidad Nacional de La Matanza, Programación Web I, Web 1, 2024, Programación UNLaM, Desarrollo Web">

    <!-- Logo -->
    <link rel="icon" type="image/ico" href="../assets/icon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="32x32" href="../assets/icon/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="../assets/icon/logo-180.ico">
    <link rel="apple-touch-icon" sizes="256x256" href="../assets/icon/logo-256.ico">

    <!-- Open Graph -->
    <meta property="og:title" content="La casa de los libros" />
    <meta property="og:description"
        content="Sumérgete en un mundo de historias fascinantes. Encuentra en nuestro catálogo una selección única de libros." />
    <meta property="og:site_name" content="La casa de los libros" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://maidana0.github.io/PW1-Grupo2/" />
    <meta property="og:image" content="https://maidana0.github.io/PW1-Grupo2/assets/icon/logo-256.ico" />

    <!-- Robots -->
    <meta name="robots" content="index, follow">

    <!-- Estilos -->
    <link rel="stylesheet" href="../css/estilo-principal.css">
    <link rel="stylesheet" href="../css/libros/estilo-detalles.css">
    <link rel="stylesheet" href="../css/libros/estilo-spiner.css">

</head>

<body>
    <header id="encabezado-principal" class="d-flex">
        <div class="d-flex align-center gap-2">
            <img src="../assets/img/logo.png" class="logo" alt="logo">
            <a class="nombre-del-sitio" href="/PW1-Grupo2/">
                La casa de los libros
            </a>
        </div>

        <div class="d-flex menu-usuario">
            <a href="./iniciar-sesion.html">
                Iniciar Sesión
            </a>
            <a href="./registrarse.html">
                Registrarse
            </a>
        </div>

    </header>

    <main>

        <a href="/" class="volver">‹ Volver</a>

        <h1 id="titulo-de-pagina" class="text-center">TITULO</h1>

        <section id="detalles-del-libro" class="d-flex justify-between gap-2">
            <div id="loader" class="loader">
                <div class="loader-content">
                    <div class="spinner"></div>
                </div>
            </div>


        </section>
    </main>


    <footer id="footer-principal" class="d-flex">
        <div class="footer-columna d-flex">
            <h3>Contactanos</h3>
            <span class="d-flex">
                <img src="../assets/icon/footer/telefono.svg" alt="telefono">+54 911 1234 xxx
            </span>
            <span class="d-flex">
                <img src="../assets/icon/footer/mail_20dp_000000_FILL0_wght300_GRAD0_opsz24.svg"
                    alt="mail">lacasalibros@gmail.com
            </span>
        </div>

        <div class="footer-columna">
            <img id="qr-code" src="../assets/img/qr.png" alt="codigo-qr" />
        </div>
        <div class="footer-columna">
            <h3>Redes Sociales</h3>
            <span class="d-flex">
                <a href="https://miel.unlam.edu.ar/principal/interno/" target="_blank">
                    <img class="red-social-icono" src="../assets/icon/footer/facebook.png" alt="facebook" width="30px"
                        height="30px">
                </a>
                <a href="https://miel.unlam.edu.ar/principal/interno/" target="_blank">
                    <img class="red-social-icono" src="../assets/icon/footer/instagram.png" alt="instagram" width="30px"
                        height="30px">
                </a>
                <a href="https://miel.unlam.edu.ar/principal/interno/" target="_blank">
                    <img class="red-social-icono" src="../assets/icon/footer/linkedin.png" alt="linkedin" width="30px"
                        height="30px">
                </a>
            </span>
        </div>
    </footer>

    <script type="module" src="../js/detalles-del-libro.js"></script>

    <script type="module">
        import libros from "../data/libros.json" with { type: 'json' };


        const titulo = document.getElementById("titulo-de-pagina")
        const contenedor = document.getElementById("detalles-del-libro")
        const idDelLibroBuscado = document.location.search.split("=")[1]

        const svgEstrella = '<svg xmlns="http://www.w3.org/2000/svg" height="25px" viewBox="0 -960 960 960" width="25px" fill="#FFFF55"><path d="M333.33-259 480-347l146.67 89-39-166.67 129-112-170-15L480-709l-66.67 156.33-170 15 129 112.34-39 166.33ZM233-120l65-281L80-590l288-25 112-265 112 265 288 25-218 189 65 281-247-149-247 149Zm247-353.33Z"/></svg>'

        const libro = buscandoElLibro(idDelLibroBuscado)


        if (!libro) {
            titulo.innerText = "El libro que busca no existe en nuestra base de datos"
            contenedor.innerHTML = "<img src='../assets/img/page-not-found.webp' alt='not-found' width='390px' height='280px' style='border-radius: 18px; margin: 2rem auto;'/>"
        } else {
            document.title = libro.Nombre;
            titulo.innerText = libro.Nombre;
            contenedor.innerHTML = crearArticulo(libro)
        }




        function buscandoElLibro(id) {
            const libroBuscado = libros.find(libro => libro.Id === id)
            return libroBuscado
        }

        function crearArticulo(libro) {
            const { Nombre, Categoria, Autor, Descripcion, Referencia, Portada, Rating, "personalizado_1.ISBN": ISBN, "personalizado_2.Fecha Publicacion": FechaPublicacion, "personalizado_3.Editorial": Editorial, "personalizado_4.Paginas": Paginas, "personalizado_5.Presentacion": Presentacion } = libro

            let parrafos = ""
            Descripcion.split(".").forEach((texto) => {
                if (texto.length > 0) {
                    parrafos += `<p class="parrafo">${texto}.</p>`
                }
            })

            return `
              <div class="primer-col text-center">
                  <img src="${Portada}"
                      alt="${Nombre}" class="imagen-portada"/>
                  <h3 class="titulo-pequeño">${Autor}</h3>
                  <a href="${Referencia}" target="_blank" class="ver-mas text-center">Ver más</a>
              </div>
  
              <div class="segunda-col">
                              
                  <div class="d-flex flex-col parrafos-pequeños">
                      <div class="d-flex justify-between">
                          <p title="${FechaPublicacion}">
                              <strong class="rotulo">Fecha de Publicación:</strong>
                               ${FechaPublicacion}
                          </p>
  
                          <p title="${Categoria}">
                              <strong class="rotulo">Categoría:</strong> 
                              ${Categoria}
                          </p>
                      </div>
  
                      <div class="d-flex justify-between">
                          <p title="${Editorial}">
                              <strong class="rotulo">Editorial:</strong>
                              ${Editorial}
                          </p>
  
                          <p title="${Paginas}">
                              <strong class="rotulo">Páginas:</strong> 
                              ${Paginas}
                          </p>
                      </div>
                      <div class="d-flex justify-between">
                          <p title="${ISBN}">
                              <strong class="rotulo">ISBM:</strong> 
                              ${ISBN}
                          </p>
                          <p title="${Presentacion}">
                              <strong class="rotulo">Presentación:</strong> 
                              ${Presentacion}
                          </p>
                      </div>
                  </div>
  
                  <div class="descripcion" style="position:relative"> 
                      <div title="Calificación: ${Rating}" style="position:absolute; right:60px; top:29px"> 
                          ${svgEstrella.repeat(Rating)}
                      </div>
                      <p class="parrafo"> <strong class="rotulo">Descripción:</strong> 
                      ${parrafos}
                      </p>
                  </div>
  
              </div>
      `
        }



    </script>
</body>

</html>